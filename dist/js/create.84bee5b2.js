(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create"],{1754:function(e,t,s){},2366:function(e,t){for(var s=[],n=0;n<256;++n)s[n]=(n+256).toString(16).substr(1);function r(e,t){var n=t||0,r=s;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}e.exports=r},2861:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"questions"},[s("transition-group",{attrs:{tag:"ul",name:"questions"}},e._l(e.poll.questions,(function(t){return s("li",{key:t.id,staticClass:"field",class:{skipped:t.skipped}},[s("div",{staticClass:"order"},[e._v(e._s(t.order))]),s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[e._v("Radio buttons")]),e.poll.questions.length>1?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return e.deleteQuestion(t.id)}}}):e._e()]),s("div",{staticClass:"body"},[s("p",{staticClass:"question"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question.question"}],attrs:{type:"text",placeholder:"type your question",required:"required",minlength:"3",maxlength:"255"},domProps:{value:t.question},on:{input:function(s){s.target.composing||e.$set(t,"question",s.target.value)}}})]),s("transition-group",{attrs:{tag:"ul",name:"answers"}},e._l(t.answers,(function(n){return s("li",{key:n.id,staticClass:"answer"},[s("span",[e._v("Answer")]),s("input",{directives:[{name:"model",rawName:"v-model",value:n.answer,expression:"answer.answer"}],attrs:{type:"text",required:"required",minlength:"3",maxlength:"255",placeholder:"type your answer"},domProps:{value:n.answer},on:{input:function(t){t.target.composing||e.$set(n,"answer",t.target.value)}}}),t.answers.length>2?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return e.deleteAnswer(t.id,n.id)}}}):e._e()])})),0),s("ul",{staticClass:"end"},[s("li",{staticClass:"answer"},[s("button",{on:{click:function(s){return e.addAnswer(t.id)}}},[e._v("Add more answer")])])])],1),s("div",{staticClass:"footer"},[s("div",[e._v(" Order: "),s("i",{staticClass:"fa fa-chevron-up",class:{disabled:1===t.order},attrs:{disabled:1===t.order},on:{click:function(s){return e.changeOrder("up",t)}}}),e._v(" "),s("span",{staticClass:"number"},[e._v(e._s(t.order))]),e._v(" "),s("i",{staticClass:"fa fa-chevron-down",class:{disabled:t.order===e.poll.questions.length},attrs:{disabled:t.order===e.poll.questions.length},on:{click:function(s){return e.changeOrder("down",t)}}})]),s("div",[s("label",[e._v("Skip: "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.skipped,expression:"question.skipped"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.skipped)?e._i(t.skipped,null)>-1:t.skipped},on:{change:function(s){var n=t.skipped,r=s.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&e.$set(t,"skipped",n.concat([o])):a>-1&&e.$set(t,"skipped",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(t,"skipped",i)}}})])])])])})),0),s("ul",[s("li",{staticClass:"more",on:{click:e.addQuestion}},[s("i",{staticClass:"fa fa-plus"}),e._v(" Add more radio buttons ")]),s("li",{staticClass:"field"},[s("div",{staticClass:"order"},[e._v(e._s(e.poll.questions.length+1))]),e._m(0),s("div",{staticClass:"body"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.poll.message,expression:"poll.message"}],attrs:{required:"required",minlength:"3",maxlength:"255"},domProps:{value:e.poll.message},on:{input:function(t){t.target.composing||e.$set(e.poll,"message",t.target.value)}}})]),s("div",{staticClass:"footer"},[e._v(" Order: "),s("span",{staticClass:"number"},[e._v(e._s(e.poll.questions.length+1))])])])])],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[e._v("Message")])])}],i=(s("7db0"),s("c740"),s("159b"),s("2909")),o=s("c64e"),a=s.n(o),l={props:["poll"],name:"questions",methods:{changeOrder:function(e,t){var s=t.order;"up"==e&&1!==s?(this.poll.questions.find((function(e){return e.order===s-1})).order=s,t.order-=1):"down"===e&&s!==this.poll.questions.length&&(this.poll.questions.find((function(e){return e.order===s+1})).order=s,t.order+=1)},rearrangeOrder:function(e){for(var t=this.poll.questions.findIndex((function(t){return t.id===e})),s=t+1;s<this.poll.questions.length;s++)this.poll.questions[s].order--},addAnswer:function(e){var t={type:"answer",isAdded:!0,id:a()(),question_uuid:e,answer:"",result:0};this.poll.questions.find((function(t){return t.id===e})).answers.push(t)},deleteAnswer:function(e,t){var s=this.poll.questions.findIndex((function(t){return t.id===e})),n=this.poll.questions[s],r=n.answers.findIndex((function(e){return e.id===t}));this.$delete(n.answers,r)},addQuestion:function(){var e={type:"question",isAdded:!0,id:a()(),poll_uuid:this.poll.id,order:this.poll.questions.length+1,answers:[]};this.poll.questions.push(e),this.addAnswer(e.id),this.addAnswer(e.id)},deleteQuestion:function(e){var t=this,s=this.poll.questions.findIndex((function(t){return t.id===e})),n=this.poll.questions[s],r=Object(i["a"])(n.answers);r.forEach((function(s){t.deleteAnswer(e,s.id)})),this.rearrangeOrder(e),this.$delete(this.poll.questions,s)}}},u=l,d=(s("403d"),s("2877")),c=Object(d["a"])(u,n,r,!1,null,null,null);t["a"]=c.exports},"403d":function(e,t,s){"use strict";var n=s("1754"),r=s.n(n);r.a},a23d:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"poll"},[s("div",{staticClass:"create"},[s("h1",{staticClass:"title"},[e._v("New poll")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],staticClass:"name",attrs:{type:"text",placeholder:"type poll name",required:"required",minlength:"3",maxlength:"255"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}}),s("p",{staticClass:"warning"},[e._v(" Web widget snippet will appear after you create new poll ")]),s("Questions",{attrs:{poll:e.sortedPoll}}),s("div",{staticClass:"buttons"},[s("button",{class:{disabled:e.busy},attrs:{disabled:e.busy},on:{click:function(t){return e.createPoll(e.poll)}}},[e._v("Create poll")]),s("router-link",{class:{disabled:e.busy},attrs:{to:"/",tag:"button",disabled:e.busy}},[e._v("Cancel")])],1)],1)])},r=[],i=(s("a4d3"),s("4de4"),s("4e82"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("159b"),s("ade3")),o=s("2f62"),a=s("c64e"),l=s.n(a),u=s("2861");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p=l()(),f=l()(),v={components:{Questions:u["a"]},data:function(){return{poll:{name:null,message:null,created_at:new Date,id:p,questions:[{id:f,question:null,order:1,poll_uuid:p,skip:!1,answers:[{id:l()(),question_uuid:f,answer:null,result:0},{id:l()(),question_uuid:f,answer:null,result:0}]}]}}},computed:c({},Object(o["c"])(["busy"]),{},Object(o["b"])({validatePoll:"poll/validatePoll"}),{sortedPoll:function(){var e=this.poll;return e.questions.sort((function(e,t){return e.order-t.order})),e.questions.forEach((function(e){e.answers.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)}))})),e}}),methods:{createPoll:function(e){var t=this;this.validatePoll({poll:e})&&(this.$store.commit("setBusy",!0),this.$store.dispatch("poll/createPoll",{poll:this.poll}).then((function(e){t.$router.push({name:"update",params:{id:e.id}}),t.$notify({group:"msg",type:"success",title:"Poll is created"})})).catch((function(){t.$notify({group:"msg",type:"error",title:"Error occured"})})).finally((function(){t.$store.commit("setBusy",!1,{root:!0})})))}}},m=v,h=s("2877"),g=Object(h["a"])(m,n,r,!1,null,null,null);t["default"]=g.exports},c64e:function(e,t,s){var n=s("e1f4"),r=s("2366");function i(e,t,s){var i=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||r(o)}e.exports=i},e1f4:function(e,t){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var n=new Uint8Array(16);e.exports=function(){return s(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}}}]);
//# sourceMappingURL=create.84bee5b2.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update"],{1754:function(t,e,s){},2366:function(t,e){for(var s=[],n=0;n<256;++n)s[n]=(n+256).toString(16).substr(1);function i(t,e){var n=e||0,i=s;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}t.exports=i},2861:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"questions"},[s("transition-group",{attrs:{tag:"ul",name:"questions"}},t._l(t.poll.questions,(function(e){return s("li",{key:e.id,staticClass:"field",class:{skipped:e.skipped}},[s("div",{staticClass:"order"},[t._v(t._s(e.order))]),s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("Radio buttons")]),t.poll.questions.length>1?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return t.deleteQuestion(e.id)}}}):t._e()]),s("div",{staticClass:"body"},[s("p",{staticClass:"question"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.question,expression:"question.question"}],attrs:{type:"text",placeholder:"type your question",required:"required",minlength:"3",maxlength:"255"},domProps:{value:e.question},on:{input:function(s){s.target.composing||t.$set(e,"question",s.target.value)}}})]),s("transition-group",{attrs:{tag:"ul",name:"answers"}},t._l(e.answers,(function(n){return s("li",{key:n.id,staticClass:"answer"},[s("span",[t._v("Answer")]),s("input",{directives:[{name:"model",rawName:"v-model",value:n.answer,expression:"answer.answer"}],attrs:{type:"text",required:"required",minlength:"3",maxlength:"255",placeholder:"type your answer"},domProps:{value:n.answer},on:{input:function(e){e.target.composing||t.$set(n,"answer",e.target.value)}}}),e.answers.length>2?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return t.deleteAnswer(e.id,n.id)}}}):t._e()])})),0),s("ul",{staticClass:"end"},[s("li",{staticClass:"answer"},[s("button",{on:{click:function(s){return t.addAnswer(e.id)}}},[t._v("Add more answer")])])])],1),s("div",{staticClass:"footer"},[s("div",[t._v(" Order: "),s("i",{staticClass:"fa fa-chevron-up",class:{disabled:1===e.order},attrs:{disabled:1===e.order},on:{click:function(s){return t.changeOrder("up",e)}}}),t._v(" "),s("span",{staticClass:"number"},[t._v(t._s(e.order))]),t._v(" "),s("i",{staticClass:"fa fa-chevron-down",class:{disabled:e.order===t.poll.questions.length},attrs:{disabled:e.order===t.poll.questions.length},on:{click:function(s){return t.changeOrder("down",e)}}})]),s("div",[s("label",[t._v("Skip: "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.skipped,expression:"question.skipped"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.skipped)?t._i(e.skipped,null)>-1:e.skipped},on:{change:function(s){var n=e.skipped,i=s.target,r=!!i.checked;if(Array.isArray(n)){var o=null,l=t._i(n,o);i.checked?l<0&&t.$set(e,"skipped",n.concat([o])):l>-1&&t.$set(e,"skipped",n.slice(0,l).concat(n.slice(l+1)))}else t.$set(e,"skipped",r)}}})])])])])})),0),s("ul",[s("li",{staticClass:"more",on:{click:t.addQuestion}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Add more radio buttons ")]),s("li",{staticClass:"field"},[s("div",{staticClass:"order"},[t._v(t._s(t.poll.questions.length+1))]),t._m(0),s("div",{staticClass:"body"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.poll.message,expression:"poll.message"}],attrs:{required:"required",minlength:"3",maxlength:"255"},domProps:{value:t.poll.message},on:{input:function(e){e.target.composing||t.$set(t.poll,"message",e.target.value)}}})]),s("div",{staticClass:"footer"},[t._v(" Order: "),s("span",{staticClass:"number"},[t._v(t._s(t.poll.questions.length+1))])])])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[t._v("Message")])])}],r=(s("7db0"),s("c740"),s("159b"),s("2909")),o=s("c64e"),l=s.n(o),a={props:["poll"],name:"questions",methods:{changeOrder:function(t,e){var s=e.order;"up"==t&&1!==s?(this.poll.questions.find((function(t){return t.order===s-1})).order=s,e.order-=1):"down"===t&&s!==this.poll.questions.length&&(this.poll.questions.find((function(t){return t.order===s+1})).order=s,e.order+=1)},rearrangeOrder:function(t){for(var e=this.poll.questions.findIndex((function(e){return e.id===t})),s=e+1;s<this.poll.questions.length;s++)this.poll.questions[s].order--},addAnswer:function(t){var e={type:"answer",isAdded:!0,id:l()(),question_uuid:t,answer:"",result:0};this.poll.questions.find((function(e){return e.id===t})).answers.push(e)},deleteAnswer:function(t,e){var s=this.poll.questions.findIndex((function(e){return e.id===t})),n=this.poll.questions[s],i=n.answers.findIndex((function(t){return t.id===e}));this.$delete(n.answers,i)},addQuestion:function(){var t={type:"question",isAdded:!0,id:l()(),poll_uuid:this.poll.id,order:this.poll.questions.length+1,answers:[]};this.poll.questions.push(t),this.addAnswer(t.id),this.addAnswer(t.id)},deleteQuestion:function(t){var e=this,s=this.poll.questions.findIndex((function(e){return e.id===t})),n=this.poll.questions[s],i=Object(r["a"])(n.answers);i.forEach((function(s){e.deleteAnswer(t,s.id)})),this.rearrangeOrder(t),this.$delete(this.poll.questions,s)}}},u=a,d=(s("403d"),s("2877")),c=Object(d["a"])(u,n,i,!1,null,null,null);e["a"]=c.exports},"403d":function(t,e,s){"use strict";var n=s("1754"),i=s.n(n);i.a},"4ae4":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"poll"},[t.notFound?t._e():s("div",{staticClass:"update"},[s("h1",{staticClass:"title"},[t._v("Edit poll")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.poll.name,expression:"poll.name"}],staticClass:"name",attrs:{type:"text",required:"",placeholder:"type poll name"},domProps:{value:t.poll.name},on:{input:function(e){e.target.composing||t.$set(t.poll,"name",e.target.value)}}}),s("p",{staticClass:"warning"},[t._v(" You can lost data if delete AND update the poll ")]),s("Questions",{attrs:{poll:t.sortedPoll}}),s("div",{staticClass:"buttons"},[s("button",{class:{disabled:t.busy},attrs:{disabled:t.busy},on:{click:function(e){return t.updatePoll(t.poll)}}},[t._v("Save changes")]),s("button",{class:{disabled:t.busy},attrs:{disabled:t.busy},on:{click:function(e){return t.deletePoll(t.poll)}}},[t._v("Delete poll")]),s("router-link",{class:{disabled:t.busy},attrs:{to:"/",tag:"button",disabled:t.busy}},[t._v("Cancel")])],1)],1),t.notFound?t._e():s("Widget",{attrs:{poll:t.originPoll}})],1)},i=[],r=(s("a4d3"),s("4de4"),s("4e82"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("159b"),s("ade3")),o=s("2f62"),l=s("2861"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"widget"},[s("div",{staticClass:"code"},[t._m(0),s("code",[t._v(' <div id="pollapp_widget"></div> <script>s_p_w_poll_uuid="'+t._s(t.poll.id)+'"<\/script> <script src="http://13fdb418-0318-4c0c-b344-7780db36f2ba.jexia.app/index.js"><\/script> ')])]),s("router-link",{attrs:{tag:"button",to:{name:"results",params:{id:t.poll.id}}}},[t._v("Check the results")])],1)},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h3",{staticClass:"title"},[s("i",{staticClass:"fa fa-code"}),t._v(" Javascript web widget snippet")])}],d={props:["poll"]},c=d,p=(s("6cab"),s("2877")),f=Object(p["a"])(c,a,u,!1,null,null,null),h=f.exports;function v(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?v(Object(s),!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var g={components:{Questions:l["a"],Widget:h},data:function(){return{poll:{},notFound:!1}},computed:m({},Object(o["c"])(["busy"]),{},Object(o["b"])({getPollById:"poll/getPollById",validatePoll:"poll/validatePoll"}),{sortedPoll:function(){var t=this.poll;return t.questions.sort((function(t,e){return t.order-e.order})),t.questions.forEach((function(t){t.answers.sort((function(t,e){return new Date(t.created_at)-new Date(e.created_at)}))})),t},originPoll:function(){return this.getPollById(this.$attrs.id)}}),methods:{deletePoll:function(t){var e=this;this.$store.commit("setBusy",!0),this.$store.dispatch("poll/deletePoll",{poll:t}).then((function(){e.$notify({group:"msg",type:"success",title:"Poll deleted"})})).catch((function(){e.$notify({group:"msg",type:"error",title:"Error occured"})})).finally((function(){e.$store.commit("setBusy",!1)}))},updatePoll:function(t){var e=this;this.validatePoll({poll:t})&&(this.$store.commit("setBusy",!0),this.$store.dispatch("poll/updatePoll",{poll:this.poll,originPoll:this.originPoll}).then((function(){e.$notify({group:"msg",type:"success",title:"Poll updated"})})).catch((function(){e.$notify({group:"msg",type:"error",title:"Error occured"})})).finally((function(){e.$store.commit("setBusy",!1)})))}},created:function(){var t=this.getPollById(this.$attrs.id);t?this.poll=this.$_.cloneDeep(t):(this.notFound=!0,this.$router.push({path:"/"}))},beforeRouteUpdate:function(t,e,s){var n=this.getPollById(t.params.id);n?this.poll=this.$_.cloneDeep(n):(this.notFound=!0,this.$router.push({path:"/"})),s()}},b=g,y=(s("7ebf"),Object(p["a"])(b,n,i,!1,null,null,null));e["default"]=y.exports},"6cab":function(t,e,s){"use strict";var n=s("73ac"),i=s.n(n);i.a},"73ac":function(t,e,s){},"7ebf":function(t,e,s){"use strict";var n=s("a515"),i=s.n(n);i.a},a515:function(t,e,s){},c64e:function(t,e,s){var n=s("e1f4"),i=s("2366");function r(t,e,s){var r=e&&s||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var l=0;l<16;++l)e[r+l]=o[l];return e||i(o)}t.exports=r},e1f4:function(t,e){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var n=new Uint8Array(16);t.exports=function(){return s(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}}}]);
//# sourceMappingURL=update.0f1e012f.js.map